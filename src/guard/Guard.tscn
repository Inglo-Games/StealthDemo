[gd_scene load_steps=7 format=3 uid="uid://cim0smeqjobbv"]

[ext_resource type="Script" path="res://src/guard/Guard.gd" id="1_ck1ss"]
[ext_resource type="PackedScene" uid="uid://yr44n1vxk5r7" path="res://assets/models/guardbot.glb" id="1_onnlx"]
[ext_resource type="PackedScene" uid="uid://c6jtsxrdsu121" path="res://src/ui/TempLabel.tscn" id="2_w70b2"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_wa15d"]
points = PackedVector3Array(-0.436329, 0.119029, -0.654473, 0.4445, 0.256026, 0.598261, -0.439397, 0.256445, 0.602738, -0.428903, 0.370529, -0.547579, 0.431781, 0.00725547, -0.503148, -0.425441, 0.0064064, 0.449171, 0.437154, 0.370529, -0.547579, 0.424138, 0.383997, 0.41973, 0.434855, 0.0250401, 0.50791, -0.428939, 0.370543, 0.491522, -0.42353, 0.00725547, -0.503148, 0.4445, 0.256026, -0.654361, -0.436394, 0.119018, 0.598467, 0.44202, 0.0805831, -0.631326, -0.439348, 0.256439, -0.658768, -0.408986, 0.38093, -0.376799, 0.433691, 0.0064064, 0.449171, 0.4445, 0.119043, 0.598261, 0.439336, 0.332701, 0.552141, -0.415888, 0.383997, 0.41973, -0.433273, 0.0418205, -0.591792, 0.417237, 0.38093, -0.376799, -0.433331, 0.0417999, 0.535767, 0.439278, 0.332683, -0.608163, 0.4445, 0.119043, -0.654361, 0.441524, 0.0418205, -0.591792, -0.431086, 0.332701, 0.552141, -0.431028, 0.332683, -0.608163, 0.43719, 0.370543, 0.491522, 0.442083, 0.0805665, 0.575312, 0.434806, 0.02506, -0.563948, 0.441581, 0.0417999, 0.535767)

[sub_resource type="BoxShape3D" id="BoxShape3D_rqbxe"]
size = Vector3(9.55428, 2, 15.6952)

[sub_resource type="BoxShape3D" id="BoxShape3D_shpph"]
size = Vector3(1.8144, 2, 2.01763)

[node name="GuardBot" instance=ExtResource("1_onnlx")]
script = ExtResource("1_ck1ss")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="2"]
shape = SubResource("ConvexPolygonShape3D_wa15d")
disabled = true

[node name="SpotLight3D" type="SpotLight3D" parent="." index="7"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.659648, 1.20312, -0.353766)
light_color = Color(1, 0.933333, 0.396078, 1)
light_energy = 15.0
light_indirect_energy = 1.75
spot_range = 17.0

[node name="SightArea" type="Area3D" parent="." index="8"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SightArea" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.204556, 1.04821, -8.20516)
shape = SubResource("BoxShape3D_rqbxe")

[node name="CatchArea" type="Area3D" parent="." index="9"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.01948, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="CatchArea" index="0"]
shape = SubResource("BoxShape3D_shpph")

[node name="AlertCooldown" type="Timer" parent="." index="10"]
one_shot = true

[node name="SearchCooldown" type="Timer" parent="." index="11"]
one_shot = true

[node name="TempLabel" parent="." index="12" instance=ExtResource("2_w70b2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.39512, 0)

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="." index="13"]
target_desired_distance = 2.5
avoidance_enabled = true

[connection signal="navigation_finished" from="NavigationAgent3D" to="." method="_on_nav_target_reached"]
[connection signal="target_reached" from="NavigationAgent3D" to="." method="_on_nav_target_reached"]
[connection signal="velocity_computed" from="NavigationAgent3D" to="." method="_on_nav_velocity_computed"]
