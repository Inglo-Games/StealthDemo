[gd_scene load_steps=16 format=3 uid="uid://dtjygabicoy2"]

[ext_resource type="Material" uid="uid://lk4t7pr3spik" path="res://src/level/concrete_floor.material" id="1_dqfkc"]
[ext_resource type="Script" path="res://src/level/TutorialRoom05.gd" id="1_u7rxx"]
[ext_resource type="Material" uid="uid://n131o6hbuf3i" path="res://src/level/brick_wall.material" id="2_bfq1h"]
[ext_resource type="PackedScene" uid="uid://cf5061yye8rjx" path="res://src/level/LevelExitDoor.tscn" id="6_etbf1"]
[ext_resource type="PackedScene" uid="uid://da2cq7xi0y6g1" path="res://src/guard/Guard.tscn" id="7_yausu"]
[ext_resource type="PackedScene" uid="uid://bca31hpk1jdsd" path="res://src/player/Player.tscn" id="8_fxuvm"]

[sub_resource type="NavigationMesh" id="NavigationMesh_xkwgb"]
vertices = PackedVector3Array(-9.9028, 0.5, -39.255, -19.4028, 0.5, -39.255, -19.4028, 0.5, -30.005, 19.3472, 0.5, -29.505, 19.3472, 0.5, -39.255, 9.5972, 0.5, -39.255, -19.4028, 0.5, 29.245, -19.4028, 0.5, 39.245, -9.9028, 0.5, 39.245, 9.5972, 0.5, 39.245, 19.3472, 0.5, 39.245, 19.3472, 0.5, 29.245, -0.1528, 0.5, -39.255, -9.9028, 0.5, -39.255, -19.4028, 0.5, -30.005, -19.4028, 0.5, -20.005, -19.4028, 0.5, 29.245, -9.9028, 0.5, 39.245, -0.1528, 0.5, 39.245, -19.4028, 0.5, 19.495, 19.3472, 0.5, -19.755, 19.3472, 0.5, -29.505, 9.5972, 0.5, -39.255, -0.1528, 0.5, 39.245, 9.5972, 0.5, 39.245, 19.3472, 0.5, 29.245, 19.3472, 0.5, 19.495, -0.1528, 0.5, 39.245, 19.3472, 0.5, 19.495, 19.3472, 0.5, 9.745, 19.3472, 0.5, -19.755, 9.5972, 0.5, -39.255, -0.1528, 0.5, -39.255, 19.3472, 0.5, -10.005, -19.4028, 0.5, 9.495, -19.4028, 0.5, 19.495, -0.1528, 0.5, 39.245, -19.4028, 0.5, 9.495, -0.1528, 0.5, 39.245, 19.3472, 0.5, 9.745, 19.3472, 0.5, -0.00500107, -19.4028, 0.5, -0.255001, -0.1528, 0.5, -39.255, -19.4028, 0.5, -20.005, -19.4028, 0.5, -10.255, 19.3472, 0.5, -10.005, -0.1528, 0.5, -39.255, -19.4028, 0.5, -10.255, -19.4028, 0.5, -0.255001, 19.3472, 0.5, -0.00500107)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(8, 7, 6), PackedInt32Array(11, 10, 9), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 15), PackedInt32Array(17, 16, 18), PackedInt32Array(18, 16, 19), PackedInt32Array(22, 21, 20), PackedInt32Array(24, 23, 25), PackedInt32Array(25, 23, 26), PackedInt32Array(29, 28, 27), PackedInt32Array(31, 30, 32), PackedInt32Array(32, 30, 33), PackedInt32Array(36, 35, 34), PackedInt32Array(41, 40, 37), PackedInt32Array(37, 40, 39), PackedInt32Array(37, 39, 38), PackedInt32Array(43, 42, 44), PackedInt32Array(47, 46, 48), PackedInt32Array(48, 46, 45), PackedInt32Array(48, 45, 49)]

[sub_resource type="PlaneMesh" id="PlaneMesh_e0n0n"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_8jk27"]
data = PackedVector3Array(1, 0, 1, -1, 0, 1, 1, 0, -1, -1, 0, 1, -1, 0, -1, 1, 0, -1)

[sub_resource type="BoxMesh" id="BoxMesh_klqnn"]
resource_local_to_scene = true
material = ExtResource("2_bfq1h")
size = Vector3(40, 8, 0.1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_xtgaj"]
data = PackedVector3Array(-20, 4, 0.05, 20, 4, 0.05, -20, -4, 0.05, 20, 4, 0.05, 20, -4, 0.05, -20, -4, 0.05, 20, 4, -0.05, -20, 4, -0.05, 20, -4, -0.05, -20, 4, -0.05, -20, -4, -0.05, 20, -4, -0.05, 20, 4, 0.05, 20, 4, -0.05, 20, -4, 0.05, 20, 4, -0.05, 20, -4, -0.05, 20, -4, 0.05, -20, 4, -0.05, -20, 4, 0.05, -20, -4, -0.05, -20, 4, 0.05, -20, -4, 0.05, -20, -4, -0.05, 20, 4, 0.05, -20, 4, 0.05, 20, 4, -0.05, -20, 4, 0.05, -20, 4, -0.05, 20, 4, -0.05, -20, -4, 0.05, 20, -4, 0.05, -20, -4, -0.05, 20, -4, 0.05, 20, -4, -0.05, -20, -4, -0.05)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_3j418"]
data = PackedVector3Array(-20, 4, 0.05, 20, 4, 0.05, -20, -4, 0.05, 20, 4, 0.05, 20, -4, 0.05, -20, -4, 0.05, 20, 4, -0.05, -20, 4, -0.05, 20, -4, -0.05, -20, 4, -0.05, -20, -4, -0.05, 20, -4, -0.05, 20, 4, 0.05, 20, 4, -0.05, 20, -4, 0.05, 20, 4, -0.05, 20, -4, -0.05, 20, -4, 0.05, -20, 4, -0.05, -20, 4, 0.05, -20, -4, -0.05, -20, 4, 0.05, -20, -4, 0.05, -20, -4, -0.05, 20, 4, 0.05, -20, 4, 0.05, 20, 4, -0.05, -20, 4, 0.05, -20, 4, -0.05, 20, 4, -0.05, -20, -4, 0.05, 20, -4, 0.05, -20, -4, -0.05, 20, -4, 0.05, 20, -4, -0.05, -20, -4, -0.05)

[sub_resource type="BoxMesh" id="BoxMesh_2csw7"]
resource_local_to_scene = true
material = ExtResource("2_bfq1h")
size = Vector3(80, 8, 0.1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_3gdrf"]
data = PackedVector3Array(-40, 4, 0.05, 40, 4, 0.05, -40, -4, 0.05, 40, 4, 0.05, 40, -4, 0.05, -40, -4, 0.05, 40, 4, -0.05, -40, 4, -0.05, 40, -4, -0.05, -40, 4, -0.05, -40, -4, -0.05, 40, -4, -0.05, 40, 4, 0.05, 40, 4, -0.05, 40, -4, 0.05, 40, 4, -0.05, 40, -4, -0.05, 40, -4, 0.05, -40, 4, -0.05, -40, 4, 0.05, -40, -4, -0.05, -40, 4, 0.05, -40, -4, 0.05, -40, -4, -0.05, 40, 4, 0.05, -40, 4, 0.05, 40, 4, -0.05, -40, 4, 0.05, -40, 4, -0.05, 40, 4, -0.05, -40, -4, 0.05, 40, -4, 0.05, -40, -4, -0.05, 40, -4, 0.05, 40, -4, -0.05, -40, -4, -0.05)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_y4pdq"]
data = PackedVector3Array(-40, 4, 0.05, 40, 4, 0.05, -40, -4, 0.05, 40, 4, 0.05, 40, -4, 0.05, -40, -4, 0.05, 40, 4, -0.05, -40, 4, -0.05, 40, -4, -0.05, -40, 4, -0.05, -40, -4, -0.05, 40, -4, -0.05, 40, 4, 0.05, 40, 4, -0.05, 40, -4, 0.05, 40, 4, -0.05, 40, -4, -0.05, 40, -4, 0.05, -40, 4, -0.05, -40, 4, 0.05, -40, -4, -0.05, -40, 4, 0.05, -40, -4, 0.05, -40, -4, -0.05, 40, 4, 0.05, -40, 4, 0.05, 40, 4, -0.05, -40, 4, 0.05, -40, 4, -0.05, 40, 4, -0.05, -40, -4, 0.05, 40, -4, 0.05, -40, -4, -0.05, 40, -4, 0.05, 40, -4, -0.05, -40, -4, -0.05)

[node name="TutorialRoom05" type="Node3D"]
script = ExtResource("1_u7rxx")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navmesh = SubResource("NavigationMesh_xkwgb")

[node name="FloorMesh" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(20, 0, 0, 0, 1, 0, 0, 0, 40, 0, 0, 0)
mesh = SubResource("PlaneMesh_e0n0n")
surface_material_override/0 = ExtResource("1_dqfkc")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/FloorMesh"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/FloorMesh/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_8jk27")

[node name="WallMesh01" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4, -40)
mesh = SubResource("BoxMesh_klqnn")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/WallMesh01"]
collision_layer = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/WallMesh01/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_xtgaj")

[node name="WallMesh02" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4, 40)
mesh = SubResource("BoxMesh_klqnn")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/WallMesh02"]
collision_layer = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/WallMesh02/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_3j418")

[node name="WallMesh03" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -20, 4, 0)
mesh = SubResource("BoxMesh_2csw7")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/WallMesh03"]
collision_layer = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/WallMesh03/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_3gdrf")

[node name="WallMesh04" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 20, 4, 0)
layers = 3
mesh = SubResource("BoxMesh_2csw7")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/WallMesh04"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/WallMesh04/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_y4pdq")

[node name="LevelExitDoor" parent="NavigationRegion3D" instance=ExtResource("6_etbf1")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -20.0278, 0, -35.4893)
locked = true
open_time = 0.0
unlock_time = 0.0
break_time = -1.0
key_id = "tut03_exit_key"

[node name="Guards" type="Node3D" parent="."]

[node name="Guard01" parent="Guards" instance=ExtResource("7_yausu")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 15, 1, -10)
patrol_points = [Vector3(15, 1, -10), Vector3(-10, 1, -10)]

[node name="Guard02" parent="Guards" instance=ExtResource("7_yausu")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 17, 1, -30)
patrol_points = [Vector3(17, 1, -30)]
focus_point = Vector3(17, 1, -25)

[node name="Player" parent="." instance=ExtResource("8_fxuvm")]
transform = Transform3D(-0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, -0.707107, 13.0053, 1, 33.388)
